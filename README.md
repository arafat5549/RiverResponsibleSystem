###水质监测基础技术架构-技术层面
- 通用SSM（Spring+SpringMVC+Mybatis+Maven）架构

  - 优点：对于绝大多数的单web项目来说比较成熟，同时java和spring可插拔的模块式设计对于以后项目的扩展特别有好处，比如需要大批量日记处理可以集成kafka等等。同时采用分块的spring配置方式这样逻辑更清晰，同时对以后项目的扩展也有好处
  - 后续：现在还是单模块的架构，如果需要多模块 即集成水质监测和河长制系统也非常简单，而且互相之间不会影响

- Spring（IOC DI AOP 声明式事务处理）

  - 一般用于日记和全局错误处理等方面，非侵入式编程，不会破坏原有的代码逻辑

- SpringMVC（支持Restful风格）

  - 优点：Restful是最流行后台的架构，非常适合现在服务端和客户端分离的趋势
  - 现在基本都是多端并行,在服务端架构基本不变的情况下，客户端可能有PC端浏览器，手机端APP，手机端浏览器等等，采用RESTFUL风格的服务端可以利用JSON这一统一数据格式来统一处理，同时避免了早先jsp阶段，前后端不分离的情况，因为服务端程序员大多无法展现更美观的前端界面。这样子分工合作可以更合理，效率更高，同时代码复用性也更强。

- Hibernate Validate（参数校验）

- Mybatis（最少配置方案+MybatisGenerator代码自动生成）

  - 优点：
  - **Mybatis**是市面上的ORM方案中 开发效率和数据库运行效率平衡的比较良好的一款。它即没有**JPA**那么重耦合的太过厉害，对以后对数据库进行进一步的优化比如分库分表，垂直划分等那么方便，需要从sql语句和底层进行优化
  - 也不像**JDBCTemplate**那么原始，使用元素sql进行拼接 会有sql注入等安全性问题，而且开发效率极其低，基本上只有公司本身有成熟的ORM工具的才会用。
  - 同时使用我自己编写MybatisGenerator代码自动生成插件，如果有新的项目可以进行快速开发 相当于一个脚手架系统

- Quartz时间调度

- Redis缓存（ProtoStuff序列化）

- [Redis Sentinel主从高可用方案](http://wosyingjun.iteye.com/blog/2289593)

- [Redis Cluster集群高可用方案](http://wosyingjun.iteye.com/blog/2289220)

  - 优点：Redis是最流行和最成功的缓存方案,同时我采用protobuf来大幅度压缩缓存在内存中的数据，基本是1/4的大小，节省服务器内存。
  - 将他作为系统全局缓存和消息队列MQ合作 能缓冲大数据并发时的压力

- [Druid（数据源配置 sql防注入 sql性能监控)](http://wosyingjun.iteye.com/blog/2306139)

- 统一的异常处理

- Freemarker模板引擎和Metronic后端Admin模板

  - 提高开发效率 因为我们并没有UI人员

- Nodejs来编写Openlayer的GIS系统

  - 也是restful架构 读取后端的数据来进行GIS数据展示
  - 由于没有专业的前端开发，暂时功能比较少，只有marker节点和视频节点
  - 采用openlayer是因为开源gis地图组件，各种功能支持的比较完善，地图资源使用的是天地图（国家测绘局推荐，如果只是在中国范围内的政府合作是比较合适，高德和百度更偏向于娱乐和导航）
  - nodejs是因为以后js代码发布 需要进行js代码的混淆和加密，避免别人拷贝我们辛苦成果.js是纯明文代码，这样可以大大增加别人破解的难度。同时nodejs的各种插件和组件也非常多，并且最终会生成静态html资源，发布到nginx上即可。

- 数据展示和报表：

  - Echart 百度出品的图表展示工具 同时适配手机端和PC端 同时提供了多种demo案例，还有丰富的中文文档 适合快速开发

- 系统安全性:

  - Web安全性:



    - DDOS攻击：
    - Cookie劫持
    - sql注入
    - js跨域攻击 XSS 
    - 跨站请求伪造攻击（CSRF） 
    - AJAX安全性测试 -RESTFUL Token

  - - 数据编码验证 
    - 数据加密和解密 
    -  数据备份和灾难恢复 

  - **网络和通信安全性检验** 

- 待添加部分：

  - 消息队列 防止峰值系统崩溃
  - 手机端APP的编写
  - 设备数据采集系统

- ###**架构图：**

![](http://i.imgur.com/vc6iu0X.png)